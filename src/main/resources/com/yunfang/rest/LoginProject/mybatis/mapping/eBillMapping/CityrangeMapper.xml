<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunfang.rest.LoginProject.mybatis.dao.eBillDao.CityrangeMapper">
  <resultMap id="BaseResultMap" type="com.yunfang.rest.LoginProject.mybatis.model.eBillModel.Cityrange">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 06 15:51:25 CST 2018.
    -->
    <result column="ID" jdbcType="INTEGER" property="id" />
    <result column="PID" jdbcType="INTEGER" property="pid" />
    <result column="CityName" jdbcType="VARCHAR" property="cityname" />
    <result column="CityEasyName" jdbcType="VARCHAR" property="cityeasyname" />
    <result column="Level" jdbcType="INTEGER" property="level" />
    <result column="CityCode" jdbcType="VARCHAR" property="citycode" />
    <result column="Pinyin" jdbcType="VARCHAR" property="pinyin" />
    <result column="Status" jdbcType="INTEGER" property="status" />
    <result column="Sort" jdbcType="INTEGER" property="sort" />
    <association property="anliData" javaType="com.yunfang.rest.LoginProject.mybatis.model.eBillModel.AnliData">
      <id column="ID" property="id"></id>
      <result column="AZS_CHENGJIAO" jdbcType="INTEGER" property="azsChengjiao" />
      <result column="AZZ_CHENGJIAO" jdbcType="INTEGER" property="azzChengjiao" />
      <result column="AZS_GUAPAI" jdbcType="INTEGER" property="azsGuapai" />
      <result column="AZZ_GUAPAI" jdbcType="INTEGER" property="azzGuapai" />
      <result column="AFZS_GUAPAI" jdbcType="INTEGER" property="afzsGuapai" />
      <result column="AFZZ_GUAPAI" jdbcType="INTEGER" property="afzzGuapai" />
      <result column="CITYCODE" jdbcType="INTEGER" property="citycode" />

    </association>
    <association property="basicData" javaType="com.yunfang.rest.LoginProject.mybatis.model.eBillModel.BasicData">
      <id column="ID" property="id"></id>
      <result column="J_ZHOUBIANPEITAO" jdbcType="INTEGER" property="jZhoubianpeitao" />
      <result column="J_XIAOQUPINGJI" jdbcType="INTEGER" property="jXiaoqupingji" />
      <result column="J_JICHUSHULIANG" jdbcType="INTEGER" property="jJichushuliang" />
      <result column="J_ZHISHU" jdbcType="INTEGER" property="jZhishu" />
      <result column="CITYCODE" jdbcType="INTEGER" property="citycode" />

    </association>
  </resultMap>
  <select id="searchCityName" parameterType="java.lang.String" resultType="java.lang.String">

    select c.CityName from cityrange c where c.CityCode = #{cityCode}

  </select>
  <!-- 查询统计数据-->
  <select id="obtainDataSum"  resultType="java.util.Map">
    select
    sum(a.AZS_CHENGJIAO) AS 'azsChengjiao',
    sum(a.AZZ_CHENGJIAO) AS 'azzChengjiao',
    sum(a.AZS_GUAPAI) AS 'azsGuapai',
    sum(a.AZZ_GUAPAI) AS 'azzGuapai',
    sum(a.AFZS_GUAPAI) AS 'afzsGuapai',
    sum(a.AFZZ_GUAPAI) AS 'afzzGuapai',
    sum(b.J_ZHOUBIANPEITAO) AS 'jZhoubianpeitao',
    sum(b.J_XIAOQUPINGJI) AS 'jXiaoqupingji',
    sum(b.J_JICHUSHULIANG) AS 'jJichushuliang',
    sum(b.J_ZHISHU) AS 'jZhishu'

    from cityrange c  LEFT JOIN ANLI_DATA a ON c.CityCode = a.CITYCODE
    LEFT JOIN  BASIC_DATA b  ON c.CityCode = b.CITYCODE


  </select>
<!-- 查询城市数据-->
  <select id="queryDataList" parameterType="java.lang.String" resultMap="BaseResultMap">
    select c.*,a.*,b.* from cityrange c,anli_data a ,basic_data b
    <where>
      c.CityCode = a.CITYCODE AND c.CityCode = b.CITYCODE
      <if test="_parameter != null"><!-- 城市名称  -->
        AND c.CityName LIKE CONCAT(CONCAT('%',#{cityname}),'%')
      </if>
    </where>

  </select>

  <insert id="insert" parameterType="com.yunfang.rest.LoginProject.mybatis.model.eBillModel.Cityrange">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 06 15:51:25 CST 2018.
    -->
    insert into cityrange (ID, PID, CityName, 
      CityEasyName, Level, CityCode, 
      Pinyin, Status, Sort
      )
    values (#{id,jdbcType=INTEGER}, #{pid,jdbcType=INTEGER}, #{cityname,jdbcType=VARCHAR}, 
      #{cityeasyname,jdbcType=VARCHAR}, #{level,jdbcType=INTEGER}, #{citycode,jdbcType=VARCHAR}, 
      #{pinyin,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, #{sort,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.yunfang.rest.LoginProject.mybatis.model.eBillModel.Cityrange">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 06 15:51:25 CST 2018.
    -->
    insert into cityrange
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="pid != null">
        PID,
      </if>
      <if test="cityname != null">
        CityName,
      </if>
      <if test="cityeasyname != null">
        CityEasyName,
      </if>
      <if test="level != null">
        Level,
      </if>
      <if test="citycode != null">
        CityCode,
      </if>
      <if test="pinyin != null">
        Pinyin,
      </if>
      <if test="status != null">
        Status,
      </if>
      <if test="sort != null">
        Sort,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="pid != null">
        #{pid,jdbcType=INTEGER},
      </if>
      <if test="cityname != null">
        #{cityname,jdbcType=VARCHAR},
      </if>
      <if test="cityeasyname != null">
        #{cityeasyname,jdbcType=VARCHAR},
      </if>
      <if test="level != null">
        #{level,jdbcType=INTEGER},
      </if>
      <if test="citycode != null">
        #{citycode,jdbcType=VARCHAR},
      </if>
      <if test="pinyin != null">
        #{pinyin,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="sort != null">
        #{sort,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
</mapper>